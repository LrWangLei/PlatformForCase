/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.47
 * Generated at: 2017-11-10 08:59:42 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.UpdataCase;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import java.sql.*;
import java.util.*;
import java.io.*;
import com.talk51.Utils.*;
import com.talk51.Utils.JDBCConnectionPool;

public final class UpdataStep2_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("    <script src=\"../js/jquery-3.1.0.min.js\"></script>\r\n");
      out.write("    <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\r\n");
      out.write("    <title>修改该条测试用例</title>\r\n");
      out.write("</head>\r\n");
      out.write("<body>\r\n");
      out.write("<div id=\"all\" style=\"margin-left:10%;margin-right:10%;\">\r\n");
      out.write("    ");

        request.setCharacterEncoding("UTF-8");
        String caseid = request.getParameter("caseid");
    
      out.write("\r\n");
      out.write("    <script language=javascript>\r\n");
      out.write("        function datatoJson(value) {\r\n");
      out.write("            var result;\r\n");
      out.write("            try {\r\n");
      out.write("                result = JSON.parse(value);\r\n");
      out.write("            }\r\n");
      out.write("            catch (e) {\r\n");
      out.write("                result = value;\r\n");
      out.write("            }\r\n");
      out.write("            return result;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function HexDecode(buff) {\r\n");
      out.write("            var result = \"\";\r\n");
      out.write("            for (var i = 0; i < buff.length; i = i + 4) {\r\n");
      out.write("                temp = buff.substr(i, 4);\r\n");
      out.write("                temp = String.fromCharCode(parseInt(temp, 16));\r\n");
      out.write("                result = result + temp;\r\n");
      out.write("            }\r\n");
      out.write("            return result;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        var extinfbody = null;\r\n");
      out.write("        var casedealid = ");
      out.print(caseid);
      out.write("\r\n");
      out.write("            function starthover() {\r\n");
      out.write("                var posX, posY;\r\n");
      out.write("                if (window.innerHeight) {\r\n");
      out.write("                    posX = window.pageXOffset;\r\n");
      out.write("                    posY = window.pageYOffset;\r\n");
      out.write("                }\r\n");
      out.write("                else if (document.documentElement && document.documentElement.scrollTop) {\r\n");
      out.write("                    posX = document.documentElement.scrollLeft;\r\n");
      out.write("                    posY = document.documentElement.scrollTop;\r\n");
      out.write("                }\r\n");
      out.write("                else if (document.body) {\r\n");
      out.write("                    posX = document.body.scrollLeft;\r\n");
      out.write("                    posY = document.body.scrollTop;\r\n");
      out.write("                }\r\n");
      out.write("                var ad = document.getElementById(\"hover section\");\r\n");
      out.write("                ad.style.position = (\"fixed\");\r\n");
      out.write("                ad.style.backgroundColor = (\"white\");\r\n");
      out.write("                ad.style.top = (280) + \"px\";\r\n");
      out.write("                ad.style.left = (830) + \"px\";\r\n");
      out.write("                t = setTimeout(\"starthover()\", 100);\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("        function stop() {\r\n");
      out.write("            clearTimeout(t);\r\n");
      out.write("            var ad = document.getElementById(\"hover section\");\r\n");
      out.write("            ad.style.position = (\"static\");\r\n");
      out.write("        }\r\n");
      out.write("    </script>\r\n");
      out.write("    ");

        Connection connectionPre = JDBCConnectionPool.getConnection();
        Statement statementPre = connectionPre.createStatement();
        String sqlPre = "SELECT * FROM cases where id=" + caseid + "";
        //具体参数和值都保存在cases_parm_relation表中
        String sqlgetlist = "SELECT * FROM cases_parm_relation where case_id=" + caseid + "";
        ResultSet rsPre = statementPre.executeQuery(sqlPre);

        while (rsPre.next()) {
    
      out.write("\r\n");
      out.write("    <script language=javascript>\r\n");
      out.write("        extproname = \"");
      out.print(rsPre.getString("project_name"));
      out.write("\";\r\n");
      out.write("        extinfname = \"");
      out.print(rsPre.getString("interface_name"));
      out.write("\";\r\n");
      out.write("        extcufname = \"");
      out.print(rsPre.getString("call_suff"));
      out.write("\";\r\n");
      out.write("        extipinfo = \"");
      out.print(rsPre.getString("host_ip"));
      out.write("\";\r\n");
      out.write("        extinfmethod = \"");
      out.print(rsPre.getString("method"));
      out.write("\";\r\n");
      out.write("        extinfpriority = \"");
      out.print(rsPre.getString("priority"));
      out.write("\";\r\n");
      out.write("        extcacheflag = \"");
      out.print(rsPre.getString("is_cache"));
      out.write("\";\r\n");
      out.write("        extinfscenario = HexDecode(\"");
      out.print(StringTool.toHexString(rsPre.getString("scenario")));
      out.write("\");\r\n");
      out.write("        extinfexpected_result = HexDecode(\"");
      out.print(StringTool.toHexString(rsPre.getString("expected_result")));
      out.write("\");\r\n");
      out.write("    </script>\r\n");
      out.write("    ");

        }
        ResultSet rsgetlist = statementPre.executeQuery(sqlgetlist);
        while (rsgetlist.next()) {
    
      out.write("\r\n");
      out.write("    <script language=javascript>\r\n");
      out.write("        extinfbody = decodeURIComponent(\"");
      out.print(rsgetlist.getString("parm_relation"));
      out.write("\")</script>\r\n");
      out.write("    ");

        }
        rsPre.close();
        rsgetlist.close();
        statementPre.close();
        connectionPre.close();
    
      out.write("\r\n");
      out.write("    <div id=\"part1\" style=\"border:1px solid #000;padding:4px\">\r\n");
      out.write("        <p style=\"letter-spacing:2px\">第一步，请输入要修改测试用例所属的模块，如果模块存在，也可以直接修改（特殊限制：模块名称中不要包含:英文冒号字符）<br>\r\n");
      out.write("            注：如果模块不存在，当提交之后会自动添加至系统，添加后刷新即可在已有模块中看到</p><br>\r\n");
      out.write("        模块名称：<input type=\"text\" id=\"model_name\" name=\"model_name\" onchange=\"forstep2_manual()\"/>\r\n");
      out.write("        已有模块：<SELECT name=\"districtSelect\" onchange=\"forstep2_auto()\" id=\"model_name_auto\">\r\n");
      out.write("        <OPTION value=\"\" selected>请选择...</OPTION>\r\n");
      out.write("        ");

            Class.forName("com.mysql.jdbc.Driver").newInstance();
            Connection connection = JDBCConnectionPool.getConnection();
            Statement statement = connection.createStatement();
            String sql = "SELECT distinct model_name FROM interface_list";
            ResultSet rs = statement.executeQuery(sql);
            while (rs.next()) {
        
      out.write("\r\n");
      out.write("        <OPTION value=\"");
      out.print(rs.getString("model_name"));
      out.write('"');
      out.write('>');
      out.print(rs.getString("model_name"));
      out.write("\r\n");
      out.write("        </OPTION>\r\n");
      out.write("        ");

            }
            rs.close();
            statement.close();
            JDBCConnectionPool.closeConnection();
        
      out.write("\r\n");
      out.write("    </SELECT><br>\r\n");
      out.write("    </div>\r\n");
      out.write("    <div id=\"part2\" style=\"border:1px solid #000;padding:4px\">\r\n");
      out.write("        <p style=\"letter-spacing:2px\">第二步，请输入要添加测试用例的目标接口，如果模块中该存在，也可以直接添加</p><br>\r\n");
      out.write("        接口名称：<input type=\"text\" id=\"interface_name\" name=\"interface_name\"/>\r\n");
      out.write("        接口方法：<input type=\"text\" id=\"interface_suff\" name=\"interface_suff\"/>\r\n");
      out.write("        <br>已有接口：<br><SELECT name=\"districtSelect\" id=\"step2Select\" onchange=\"forstep2_full()\">\r\n");
      out.write("        <OPTION value=\"\" selected>请选择...</OPTION>\r\n");
      out.write("    </SELECT><br>\r\n");
      out.write("    </div>\r\n");
      out.write("    <script language=javascript>\r\n");
      out.write("        var parmblockid = 0;\r\n");
      out.write("\r\n");
      out.write("        function forstep2_manual() {\r\n");
      out.write("            var alerttest = document.getElementById(\"model_name\").value;\r\n");
      out.write("            var tflag = alerttest.indexOf(\":\");\r\n");
      out.write("            tflag = tflag + 1;\r\n");
      out.write("\r\n");
      out.write("            if (tflag == 1) {\r\n");
      out.write("                alert(\"您输入的模块名称中包含英文冒号字符，会导致程序错误，请更换\");\r\n");
      out.write("                document.getElementById('model_name').value = \"\";\r\n");
      out.write("                return false\r\n");
      out.write("            }\r\n");
      out.write("            getModelName();\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function forstep2_auto() {\r\n");
      out.write("            $(\"#model_name\").val($(\"#model_name_auto option:selected\").val());\r\n");
      out.write("            getModelName();\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function getModelName() {\r\n");
      out.write("            var getresponse;\r\n");
      out.write("            var modelname = $(\"#model_name\").val();\r\n");
      out.write("            $.get(\"../Controller/GetApiFromModelName.jsp?modelname=\" + modelname + \"\",\r\n");
      out.write("                function (data) {\r\n");
      out.write("                    getresponse = data;\r\n");
      out.write("                    getresponse = getresponse.replace(/\\s+/g, \"\");\r\n");
      out.write("                    getresponse = getresponse.substring(0, getresponse.length - 1);\r\n");
      out.write("                    var fin_result = getresponse.split(\":\");\r\n");
      out.write("                    step2len = fin_result.length / 2;\r\n");
      out.write("                    setstep2Option(step2len, fin_result);\r\n");
      out.write("                }\r\n");
      out.write("            )\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function setstep2Option(optionnum, optionInfo) {\r\n");
      out.write("            document.getElementById(\"step2Select\").options.length = 1;\r\n");
      out.write("            //$(\"#step2Select option\").size(1);\r\n");
      out.write("\r\n");
      out.write("            if (optionnum < 1) {\r\n");
      out.write("                return false;\r\n");
      out.write("            }\r\n");
      out.write("            else {\r\n");
      out.write("                for (var j = 0; j < optionnum; j++) {\r\n");
      out.write("                    var newSelectOption = document.createElement(\"option\");\r\n");
      out.write("                    newSelectOption.id = \"SelectOption\" + j;\r\n");
      out.write("                    newSelectOption.innerText = optionInfo[j * 2] + \":\" + optionInfo[j * 2 + 1];\r\n");
      out.write("                    newSelectOption.value = optionInfo[j * 2] + \":\" + optionInfo[j * 2 + 1];\r\n");
      out.write("                    document.getElementById(\"step2Select\").appendChild(newSelectOption);\r\n");
      out.write("                }\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function forstep2_full() {\r\n");
      out.write("            var temp = document.getElementById('step2Select').options[document.getElementById('step2Select').selectedIndex].value\r\n");
      out.write("            var temp1 = temp.split(\":\");\r\n");
      out.write("            var part1 = temp1[0];\r\n");
      out.write("            var part2 = temp1[1];\r\n");
      out.write("            document.getElementById('interface_name').value = part1;\r\n");
      out.write("            if (document.getElementById('step2Select').options[document.getElementById('step2Select').selectedIndex].value == \"\") {\r\n");
      out.write("                document.getElementById('interface_suff').value = \"\";\r\n");
      out.write("            }\r\n");
      out.write("            else {\r\n");
      out.write("                document.getElementById('interface_suff').value = part2;\r\n");
      out.write("            }\r\n");
      out.write("        }\r\n");
      out.write("    </script>\r\n");
      out.write("    <div id=\"part3\" style=\"border:1px solid #000;padding:4px\">\r\n");
      out.write("        <p style=\"letter-spacing:2px\">第三步，请修改该接口所需要的参数名，以及参数值，第一个输入框请输入参数名，第二个为参数值。<br>如果参数类型为整形或浮点型，可随机生成，请在第三个框中输入随机整数位数，在第四个框中输入随机小数位数<br>后三个按钮为参数传递概率，第一个按钮为0%，表示该参数必定不传，第二个按钮为50%，表示该参数有50%会不传，第三个为100%，表示该参数必传<br>\r\n");
      out.write("        </p>\r\n");
      out.write("        <input type=\"button\" value=\"添加新参数\" onclick=\"addParmTeam()\"/>\r\n");
      out.write("        <input type=\"button\" value=\"删除一组参数\" onclick=\"deleteParmTeam()\"/>\r\n");
      out.write("        <div id=\"dynamic parm\"></div>\r\n");
      out.write("        <input type=\"button\" value=\"一键边界测试\" onclick=\"doitnow(100)\"/>\r\n");
      out.write("    </div>\r\n");
      out.write("    <div id=\"part4\" style=\"border:1px solid #000;padding:4px\">\r\n");
      out.write("        <p style=\"letter-spacing:2px\">第四步，请选择目标接口部署的环境地址以及端口号</p><br>\r\n");
      out.write("        已有环境：<SELECT name=\"ip\" id=\"ip_auto\">\r\n");
      out.write("        ");

            Connection connection2 = JDBCConnectionPool.getConnection();
            Statement statement2 = connection2.createStatement();
            String sql2 = "SELECT * FROM interface_ip";
            ResultSet rs2 = statement2.executeQuery(sql2);
            while (rs2.next()) {
        
      out.write("\r\n");
      out.write("        <OPTION value=\"");
      out.print(rs2.getString("ip"));
      out.write(':');
      out.print(rs2.getString("port"));
      out.write('"');
      out.write('>');
      out.print(rs2.getString("ip"));
      out.write("\r\n");
      out.write("            :");
      out.print(rs2.getString("port"));
      out.write("\r\n");
      out.write("        </OPTION>\r\n");
      out.write("        ");

            }
            rs2.close();
            statement2.close();
            connection2.close();
        
      out.write("\r\n");
      out.write("    </SELECT>\r\n");
      out.write("        或者手动输入IP ： <input name=\"ip_input\" type=\"text\" id=\"ip_input\" value=\"\"/>\r\n");
      out.write("        <br>\r\n");
      out.write("    </div>\r\n");
      out.write("    <div id=\"part5\" style=\"border:1px solid #000;padding:4px\">\r\n");
      out.write("        第五步，请选择目标接口的请求方法<br>\r\n");
      out.write("        <input name=\"method\" type=\"radio\" id=\"method_get\" value=\"get\"/>Get\r\n");
      out.write("        <input name=\"method\" type=\"radio\" id=\"method_post\" value=\"post\"/>Post\r\n");
      out.write("        <input name=\"method\" type=\"radio\" id=\"method_post_body\" value=\"post_Json\"/>Post_Body\r\n");
      out.write("        <input name=\"method\" type=\"radio\" id=\"post_return_json\" value=\"post_return_json\"/>Post_Return_Json\r\n");
      out.write("        <input name=\"method\" type=\"radio\" id=\"put\" value=\"put\"/>Put\r\n");
      out.write("        <input name=\"method\" type=\"radio\" id=\"delete\" value=\"delete\"/>Delete\r\n");
      out.write("    </div>\r\n");
      out.write("    <div id=\"part6\" style=\"border:1px solid #000;padding:4px\">\r\n");
      out.write("        第六步，请选择测试用例的优先级<br>\r\n");
      out.write("        <input name=\"priority\" type=\"radio\" id=\"priority_1\" value=\"1\"/>1:第一次冒烟测试和回归测试时需要执行<br>\r\n");
      out.write("        <input name=\"priority\" type=\"radio\" id=\"priority_2\" value=\"2\"/>2:效验接口参数合法性<br>\r\n");
      out.write("        <input name=\"priority\" type=\"radio\" id=\"priority_3\" value=\"3\"/>3:自定义<br>\r\n");
      out.write("        <input name=\"priority\" type=\"radio\" id=\"priority_10\" value=\"10\" checked/>10:人工执行，比较实际结果和预期结果<br>\r\n");
      out.write("    </div>\r\n");
      out.write("    <div style=\"position:relative\">\r\n");
      out.write("        <div id=\"hover section\" style=\"position:static\">\r\n");
      out.write("            <div id=\"part7\" style=\"border:1px solid #000;padding:4px\">\r\n");
      out.write("                第七步，请修改预期结果，并选择该接口是否有缓存<br>\r\n");
      out.write("                <input type=\"submit\" value=\"浮动该层\" onclick=\"starthover()\"/>\r\n");
      out.write("                <input type=\"submit\" value=\"停止浮动\" onclick=\"stop()\"/>\r\n");
      out.write("                <br>\r\n");
      out.write("                <textarea name=\"expected\" id=\"expected\" style=\"width:500px;height:80px\"/></textarea><br>\r\n");
      out.write("                是否有缓存<input type=\"checkbox\" id=\"cacheflag\">\r\n");
      out.write("            </div>\r\n");
      out.write("            <div id=\"part8\" style=\"border:1px solid #000;padding:4px\">\r\n");
      out.write("                第八步，请修改测试用例描述<br>\r\n");
      out.write("                <textarea name=\"scenario\" id=\"scenario\" style=\"width:500px;height:80px\"/></textarea><br>\r\n");
      out.write("            </div>\r\n");
      out.write("            <div id=\"part9\" style=\"border:1px solid #000;padding:4px\">\r\n");
      out.write("                第九步，另存为或者修改提交该用例，或者立即执行<br>\r\n");
      out.write("                <input type=\"button\" value=\"新增用例\" onclick=\"testsumbit()\">\r\n");
      out.write("                <input type=\"button\" value=\"提交修改\" onclick=\"testupdata(true)\">\r\n");
      out.write("                <input type=\"button\" value=\"现在执行\" onclick=\"doitnow(0)\">\r\n");
      out.write("                <input type=\"button\" value=\"放弃修改\" onclick=\"exit_confirm()\">\r\n");
      out.write("                <input type=\"button\" value=\"保存修改后执行\" onclick=\"doitnow(1)\">\r\n");
      out.write("                <br>\r\n");
      out.write("            </div>\r\n");
      out.write("            <script language=javascript charset=\"UTF-8\">\r\n");
      out.write("                function stringToHex(str) {\r\n");
      out.write("                    var val = \"\";\r\n");
      out.write("                    for (var i = 0; i < str.length; i++) {\r\n");
      out.write("                        valtmp = str.charCodeAt(i).toString(16);\r\n");
      out.write("                        if (valtmp.length == 1) {\r\n");
      out.write("                            valtmp = \"000\" + valtmp;\r\n");
      out.write("                        }\r\n");
      out.write("                        else if (valtmp.length == 2) {\r\n");
      out.write("                            valtmp = \"00\" + valtmp;\r\n");
      out.write("                        }\r\n");
      out.write("                        val = val + valtmp\r\n");
      out.write("                    }\r\n");
      out.write("                    return val;\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("                function listparmname(list_name) {\r\n");
      out.write("                    var i = 0;\r\n");
      out.write("                    var name_list = new Array();\r\n");
      out.write("                    for (var name in list_name) {\r\n");
      out.write("                        name_list[i] = name;\r\n");
      out.write("                        i++;\r\n");
      out.write("                    }\r\n");
      out.write("                    return name_list;\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("                function listparmvalue(list_name) {\r\n");
      out.write("                    var i = 0;\r\n");
      out.write("                    var parm_value = new Array();\r\n");
      out.write("                    for (var name in list_name) {\r\n");
      out.write("                        parm_value[i] = list_name[name];\r\n");
      out.write("                        i++;\r\n");
      out.write("                    }\r\n");
      out.write("                    return parm_value;\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("                function setparmblock(list_name, list_value) {\r\n");
      out.write("                    for (var i = 0; i < list_name.length; i++) {\r\n");
      out.write("                        parmblockid++;\r\n");
      out.write("\r\n");
      out.write("                        var newParmTeam_name = document.createElement(\"input\");\r\n");
      out.write("                        newParmTeam_name.type = \"text\";\r\n");
      out.write("                        newParmTeam_name.value = list_name[i];\r\n");
      out.write("                        newParmTeam_name.id = \"name\" + parmblockid;\r\n");
      out.write("                        document.getElementById(\"dynamic parm\").appendChild(newParmTeam_name);\r\n");
      out.write("\r\n");
      out.write("                        var newParmTeam_value = document.createElement(\"input\");\r\n");
      out.write("                        newParmTeam_value.type = \"text\";\r\n");
      out.write("\r\n");
      out.write("                        //对timestamp特殊处理，让其为当前时间。\r\n");
      out.write("                        if (list_name[i] == 'timestamp') {\r\n");
      out.write("                            newParmTeam_value.value = (Date.parse(new Date()))/1000;\r\n");
      out.write("                        } else {\r\n");
      out.write("                            newParmTeam_value.value = list_value[i];\r\n");
      out.write("                        }\r\n");
      out.write("\r\n");
      out.write("                        newParmTeam_value.id = \"value\" + parmblockid;\r\n");
      out.write("                        document.getElementById(\"dynamic parm\").appendChild(newParmTeam_value);\r\n");
      out.write("\r\n");
      out.write("                        var newParmTeam_randombtn = document.createElement(\"input\");\r\n");
      out.write("                        newParmTeam_randombtn.type = \"button\";\r\n");
      out.write("                        newParmTeam_randombtn.value = \"随机生成该参数\";\r\n");
      out.write("                        newParmTeam_randombtn.onclick = function () {\r\n");
      out.write("                            GetRandomValue(this.id);\r\n");
      out.write("                        };\r\n");
      out.write("                        newParmTeam_randombtn.id = \"randombtn\" + parmblockid;\r\n");
      out.write("                        document.getElementById(\"dynamic parm\").appendChild(newParmTeam_randombtn);\r\n");
      out.write("\r\n");
      out.write("                        var newParmTeam_intunit = document.createElement(\"input\");\r\n");
      out.write("                        newParmTeam_intunit.type = \"text\";\r\n");
      out.write("                        newParmTeam_intunit.id = \"intunit\" + parmblockid;\r\n");
      out.write("                        document.getElementById(\"dynamic parm\").appendChild(newParmTeam_intunit);\r\n");
      out.write("\r\n");
      out.write("                        var newParmTeam_decunit = document.createElement(\"input\");\r\n");
      out.write("                        newParmTeam_decunit.type = \"text\";\r\n");
      out.write("                        newParmTeam_decunit.id = \"decunit\" + parmblockid;\r\n");
      out.write("                        document.getElementById(\"dynamic parm\").appendChild(newParmTeam_decunit);\r\n");
      out.write("\r\n");
      out.write("                        var newParmTeam_per_0 = document.createElement(\"input\");\r\n");
      out.write("                        newParmTeam_per_0.type = \"radio\";\r\n");
      out.write("                        newParmTeam_per_0.name = \"parm_per\" + parmblockid;\r\n");
      out.write("                        newParmTeam_per_0.value = \"0\";\r\n");
      out.write("                        newParmTeam_per_0.id = \"parm_per_0_\" + parmblockid;\r\n");
      out.write("                        document.getElementById(\"dynamic parm\").appendChild(newParmTeam_per_0);\r\n");
      out.write("\r\n");
      out.write("                        var newParmTeam_per_50 = document.createElement(\"input\");\r\n");
      out.write("                        newParmTeam_per_50.type = \"radio\";\r\n");
      out.write("                        newParmTeam_per_50.name = \"parm_per\" + parmblockid;\r\n");
      out.write("                        newParmTeam_per_50.value = \"1\";\r\n");
      out.write("                        newParmTeam_per_50.id = \"parm_per_50_\" + parmblockid;\r\n");
      out.write("                        document.getElementById(\"dynamic parm\").appendChild(newParmTeam_per_50);\r\n");
      out.write("\r\n");
      out.write("                        var newParmTeam_per_100 = document.createElement(\"input\");\r\n");
      out.write("                        newParmTeam_per_100.type = \"radio\";\r\n");
      out.write("                        newParmTeam_per_100.name = \"parm_per\" + parmblockid;\r\n");
      out.write("                        newParmTeam_per_100.checked = \"checked\";\r\n");
      out.write("                        newParmTeam_per_100.value = \"2\";\r\n");
      out.write("                        newParmTeam_per_100.id = \"parm_per_100_\" + parmblockid;\r\n");
      out.write("                        document.getElementById(\"dynamic parm\").appendChild(newParmTeam_per_100);\r\n");
      out.write("\r\n");
      out.write("                        var newParmTeam_end = document.createElement(\"br\");\r\n");
      out.write("                        newParmTeam_end.id = \"endtag\" + parmblockid;\r\n");
      out.write("                        document.getElementById(\"dynamic parm\").appendChild(newParmTeam_end);\r\n");
      out.write("                    }\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("                function addParmTeam() {\r\n");
      out.write("                    parmblockid++;\r\n");
      out.write("\r\n");
      out.write("                    var newParmTeam_name = document.createElement(\"input\");\r\n");
      out.write("                    newParmTeam_name.type = \"text\";\r\n");
      out.write("                    newParmTeam_name.id = \"name\" + parmblockid;\r\n");
      out.write("                    document.getElementById(\"dynamic parm\").appendChild(newParmTeam_name);\r\n");
      out.write("\r\n");
      out.write("                    var newParmTeam_value = document.createElement(\"input\");\r\n");
      out.write("                    newParmTeam_value.type = \"text\";\r\n");
      out.write("                    newParmTeam_value.id = \"value\" + parmblockid;\r\n");
      out.write("                    document.getElementById(\"dynamic parm\").appendChild(newParmTeam_value);\r\n");
      out.write("\r\n");
      out.write("                    var newParmTeam_randombtn = document.createElement(\"input\");\r\n");
      out.write("                    newParmTeam_randombtn.type = \"button\";\r\n");
      out.write("                    newParmTeam_randombtn.value = \"随机生成该参数\";\r\n");
      out.write("                    newParmTeam_randombtn.onclick = function () {\r\n");
      out.write("                        GetRandomValue(this.id);\r\n");
      out.write("                    };\r\n");
      out.write("                    newParmTeam_randombtn.id = \"randombtn\" + parmblockid;\r\n");
      out.write("                    document.getElementById(\"dynamic parm\").appendChild(newParmTeam_randombtn);\r\n");
      out.write("\r\n");
      out.write("                    var newParmTeam_intunit = document.createElement(\"input\");\r\n");
      out.write("                    newParmTeam_intunit.type = \"text\";\r\n");
      out.write("                    newParmTeam_intunit.id = \"intunit\" + parmblockid;\r\n");
      out.write("                    document.getElementById(\"dynamic parm\").appendChild(newParmTeam_intunit);\r\n");
      out.write("\r\n");
      out.write("                    var newParmTeam_decunit = document.createElement(\"input\");\r\n");
      out.write("                    newParmTeam_decunit.type = \"text\";\r\n");
      out.write("                    newParmTeam_decunit.id = \"decunit\" + parmblockid;\r\n");
      out.write("                    document.getElementById(\"dynamic parm\").appendChild(newParmTeam_decunit);\r\n");
      out.write("\r\n");
      out.write("                    var newParmTeam_per_0 = document.createElement(\"input\");\r\n");
      out.write("                    newParmTeam_per_0.type = \"radio\";\r\n");
      out.write("                    newParmTeam_per_0.name = \"parm_per\" + parmblockid;\r\n");
      out.write("                    newParmTeam_per_0.value = \"0\";\r\n");
      out.write("                    newParmTeam_per_0.id = \"parm_per_0_\" + parmblockid;\r\n");
      out.write("                    document.getElementById(\"dynamic parm\").appendChild(newParmTeam_per_0);\r\n");
      out.write("\r\n");
      out.write("                    var newParmTeam_per_50 = document.createElement(\"input\");\r\n");
      out.write("                    newParmTeam_per_50.type = \"radio\";\r\n");
      out.write("                    newParmTeam_per_50.name = \"parm_per\" + parmblockid;\r\n");
      out.write("                    newParmTeam_per_50.value = \"1\";\r\n");
      out.write("                    newParmTeam_per_50.id = \"parm_per_50_\" + parmblockid;\r\n");
      out.write("                    document.getElementById(\"dynamic parm\").appendChild(newParmTeam_per_50);\r\n");
      out.write("\r\n");
      out.write("                    var newParmTeam_per_100 = document.createElement(\"input\");\r\n");
      out.write("                    newParmTeam_per_100.type = \"radio\";\r\n");
      out.write("                    newParmTeam_per_100.name = \"parm_per\" + parmblockid;\r\n");
      out.write("                    newParmTeam_per_100.checked = \"checked\";\r\n");
      out.write("                    newParmTeam_per_100.value = \"2\";\r\n");
      out.write("                    newParmTeam_per_100.id = \"parm_per_100_\" + parmblockid;\r\n");
      out.write("                    document.getElementById(\"dynamic parm\").appendChild(newParmTeam_per_100);\r\n");
      out.write("\r\n");
      out.write("                    var newParmTeam_end = document.createElement(\"br\");\r\n");
      out.write("                    newParmTeam_end.id = \"endtag\" + parmblockid;\r\n");
      out.write("                    document.getElementById(\"dynamic parm\").appendChild(newParmTeam_end);\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("                function deleteParmTeam() {\r\n");
      out.write("                    if (parmblockid == 0) {\r\n");
      out.write("                        alert(\"已经没有参数组了\");\r\n");
      out.write("                        return false\r\n");
      out.write("                    }\r\n");
      out.write("\r\n");
      out.write("                    var block_name = document.getElementById(\"name\" + parmblockid);\r\n");
      out.write("                    block_name.parentNode.removeChild(block_name);\r\n");
      out.write("\r\n");
      out.write("                    var block_value = document.getElementById(\"value\" + parmblockid);\r\n");
      out.write("                    block_value.parentNode.removeChild(block_value);\r\n");
      out.write("\r\n");
      out.write("                    var block_button = document.getElementById(\"randombtn\" + parmblockid);\r\n");
      out.write("                    block_button.parentNode.removeChild(block_button);\r\n");
      out.write("\r\n");
      out.write("                    var block_intunit = document.getElementById(\"intunit\" + parmblockid);\r\n");
      out.write("                    block_intunit.parentNode.removeChild(block_intunit);\r\n");
      out.write("\r\n");
      out.write("                    var block_decunit = document.getElementById(\"decunit\" + parmblockid);\r\n");
      out.write("                    block_decunit.parentNode.removeChild(block_decunit);\r\n");
      out.write("\r\n");
      out.write("                    var block_parmper0 = document.getElementById(\"parm_per_0_\" + parmblockid);\r\n");
      out.write("                    block_parmper0.parentNode.removeChild(block_parmper0);\r\n");
      out.write("\r\n");
      out.write("                    var block_parmper50 = document.getElementById(\"parm_per_50_\" + parmblockid);\r\n");
      out.write("                    block_parmper50.parentNode.removeChild(block_parmper50);\r\n");
      out.write("\r\n");
      out.write("                    var block_parmper100 = document.getElementById(\"parm_per_100_\" + parmblockid);\r\n");
      out.write("                    block_parmper100.parentNode.removeChild(block_parmper100);\r\n");
      out.write("\r\n");
      out.write("                    var block_end_tag = document.getElementById(\"endtag\" + parmblockid);\r\n");
      out.write("                    block_end_tag.parentNode.removeChild(block_end_tag);\r\n");
      out.write("\r\n");
      out.write("                    parmblockid--;\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("                function setextname() {\r\n");
      out.write("                    var fullparm;\r\n");
      out.write("                    if (extinfbody != null) {\r\n");
      out.write("                        fullparm = JSON.parse(extinfbody);\r\n");
      out.write("                    }\r\n");
      out.write("                    var name_list = listparmname(fullparm);\r\n");
      out.write("                    var name_value_pre = listparmvalue(fullparm);\r\n");
      out.write("                    var name_value = new Array();\r\n");
      out.write("                    $(\"#model_name\").val(extproname);\r\n");
      out.write("                    $(\"#interface_name\").val(extinfname);\r\n");
      out.write("                    $(\"#interface_suff\").val(extcufname);\r\n");
      out.write("                    $(\"#ip_auto\").val(extipinfo);\r\n");
      out.write("\r\n");
      out.write("                    for (i = 0; i < name_value_pre.length; i++) {\r\n");
      out.write("                        name_value[i] = HexDecode(name_value_pre[i]);\r\n");
      out.write("                    }\r\n");
      out.write("                    setparmblock(name_list, name_value);\r\n");
      out.write("\r\n");
      out.write("                    if (extinfmethod == \"get\") {\r\n");
      out.write("                        document.getElementById('method_get').checked = true;\r\n");
      out.write("                        document.getElementById('method_post').checked = false;\r\n");
      out.write("                        document.getElementById('method_post_body').checked = false;\r\n");
      out.write("                        document.getElementById('post_return_json').checked = false;\r\n");
      out.write("                        document.getElementById('put').checked = false;\r\n");
      out.write("                        document.getElementById('delete').checked = false;\r\n");
      out.write("                    }\r\n");
      out.write("                    else if (extinfmethod == \"post\") {\r\n");
      out.write("                        document.getElementById('method_get').checked = false;\r\n");
      out.write("                        document.getElementById('method_post').checked = true;\r\n");
      out.write("                        document.getElementById('method_post_body').checked = false;\r\n");
      out.write("                        document.getElementById('post_return_json').checked = false;\r\n");
      out.write("                        document.getElementById('put').checked = false;\r\n");
      out.write("                        document.getElementById('delete').checked = false;\r\n");
      out.write("                    }\r\n");
      out.write("                    else if (extinfmethod == \"post_body\") {\r\n");
      out.write("                        document.getElementById('method_get').checked = false;\r\n");
      out.write("                        document.getElementById('method_post').checked = false;\r\n");
      out.write("                        document.getElementById('method_post_body').checked = true;\r\n");
      out.write("                        document.getElementById('post_return_json').checked = false;\r\n");
      out.write("                        document.getElementById('put').checked = false;\r\n");
      out.write("                        document.getElementById('delete').checked = false;\r\n");
      out.write("                    }\r\n");
      out.write("                    else if (extinfmethod == \"post_return_json\") {\r\n");
      out.write("                        document.getElementById('method_get').checked = false;\r\n");
      out.write("                        document.getElementById('method_post').checked = false;\r\n");
      out.write("                        document.getElementById('method_post_body').checked = false;\r\n");
      out.write("                        document.getElementById('post_return_json').checked = true;\r\n");
      out.write("                        document.getElementById('put').checked = false;\r\n");
      out.write("                        document.getElementById('delete').checked = false;\r\n");
      out.write("                    }\r\n");
      out.write("                    else if (extinfmethod == \"put\") {\r\n");
      out.write("                        document.getElementById('method_get').checked = false;\r\n");
      out.write("                        document.getElementById('method_post').checked = false;\r\n");
      out.write("                        document.getElementById('method_post_body').checked = false;\r\n");
      out.write("                        document.getElementById('post_return_json').checked = false;\r\n");
      out.write("                        document.getElementById('put').checked = true;\r\n");
      out.write("                        document.getElementById('delete').checked = false;\r\n");
      out.write("                    }\r\n");
      out.write("                    else if (extinfmethod == \"delete\") {\r\n");
      out.write("                        document.getElementById('method_get').checked = false;\r\n");
      out.write("                        document.getElementById('method_post').checked = false;\r\n");
      out.write("                        document.getElementById('method_post_body').checked = false;\r\n");
      out.write("                        document.getElementById('post_return_json').checked = false;\r\n");
      out.write("                        document.getElementById('put').checked = false;\r\n");
      out.write("                        document.getElementById('delete').checked = true;\r\n");
      out.write("                    }\r\n");
      out.write("\r\n");
      out.write("                    if (extinfpriority == \"1\") {\r\n");
      out.write("                        document.getElementById('priority_1').checked = true;\r\n");
      out.write("                        document.getElementById('priority_2').checked = false;\r\n");
      out.write("                        document.getElementById('priority_3').checked = false;\r\n");
      out.write("                        document.getElementById('priority_10').checked = false;\r\n");
      out.write("                    }\r\n");
      out.write("                    else if (extinfpriority == \"2\") {\r\n");
      out.write("                        document.getElementById('priority_1').checked = false;\r\n");
      out.write("                        document.getElementById('priority_2').checked = true;\r\n");
      out.write("                        document.getElementById('priority_3').checked = false;\r\n");
      out.write("                        document.getElementById('priority_10').checked = false;\r\n");
      out.write("                    }\r\n");
      out.write("                    else if (extinfpriority == \"3\") {\r\n");
      out.write("                        document.getElementById('priority_1').checked = false;\r\n");
      out.write("                        document.getElementById('priority_2').checked = false;\r\n");
      out.write("                        document.getElementById('priority_3').checked = true;\r\n");
      out.write("                        document.getElementById('priority_10').checked = false;\r\n");
      out.write("                    }\r\n");
      out.write("                    else if (extinfpriority == \"10\") {\r\n");
      out.write("                        document.getElementById('priority_1').checked = false;\r\n");
      out.write("                        document.getElementById('priority_2').checked = false;\r\n");
      out.write("                        document.getElementById('priority_3').checked = false;\r\n");
      out.write("                        document.getElementById('priority_10').checked = true;\r\n");
      out.write("                    }\r\n");
      out.write("\r\n");
      out.write("                    if (extcacheflag == \"0\") {\r\n");
      out.write("                        document.getElementById('cacheflag').checked = false;\r\n");
      out.write("                    }\r\n");
      out.write("                    else {\r\n");
      out.write("                        document.getElementById('cacheflag').checked = true;\r\n");
      out.write("                    }\r\n");
      out.write("\r\n");
      out.write("                    document.getElementById(\"expected\").value = extinfexpected_result;\r\n");
      out.write("                    document.getElementById(\"scenario\").value = extinfscenario;\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("                function GetRandomValue(id) {\r\n");
      out.write("                    var cut = \"randombtn\";\r\n");
      out.write("                    var f_id = id.split(cut)[1];\r\n");
      out.write("\r\n");
      out.write("                    var intunit = document.getElementById(\"intunit\" + f_id).value;\r\n");
      out.write("                    var decunit = document.getElementById(\"decunit\" + f_id).value;\r\n");
      out.write("\r\n");
      out.write("                    if (isNaN(intunit) || isNaN(decunit)) {\r\n");
      out.write("                        alert(\"随机参数位数，请输入整数\");\r\n");
      out.write("                        return false;\r\n");
      out.write("                    }\r\n");
      out.write("\r\n");
      out.write("                    var xmlhttp;\r\n");
      out.write("                    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari\r\n");
      out.write("                        xmlhttp = new XMLHttpRequest();\r\n");
      out.write("                    }\r\n");
      out.write("                    else {// code for IE6, IE5\r\n");
      out.write("                        xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n");
      out.write("                    }\r\n");
      out.write("                    xmlhttp.onreadystatechange = function () {\r\n");
      out.write("                        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {\r\n");
      out.write("                            document.getElementById(\"value\" + f_id).value = xmlhttp.responseText;\r\n");
      out.write("                        }\r\n");
      out.write("                    }\r\n");
      out.write("                    xmlhttp.open(\"GET\", \"../Tool/RandomParm.jsp?intunit=\" + intunit + \"&decunit=\" + decunit + \"\", true);\r\n");
      out.write("                    xmlhttp.send();\r\n");
      out.write("\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("                setextname();\r\n");
      out.write("\r\n");
      out.write("                // 传入为true，则会弹出校验框\r\n");
      out.write("                function testupdata(flag) {\r\n");
      out.write("                    if (flag && !change_confirm()) {\r\n");
      out.write("                        return false;\r\n");
      out.write("                    }\r\n");
      out.write("                    var bodyinfo = \"\";\r\n");
      out.write("                    var bodyinfo2 = \"\";\r\n");
      out.write("                    var bodyobject = new Object;\r\n");
      out.write("                    var tempbody = new Array();\r\n");
      out.write("                    var section2parm = {};\r\n");
      out.write("                    var section2parm_uncode = {};\r\n");
      out.write("\r\n");
      out.write("                    var st1 = document.getElementById(\"model_name\").value;\r\n");
      out.write("                    var st2 = document.getElementById(\"interface_name\").value;\r\n");
      out.write("                    var st3 = document.getElementById(\"interface_suff\").value;\r\n");
      out.write("                    var st4 = document.getElementById(\"ip_auto\").value;\r\n");
      out.write("\r\n");
      out.write("                    var st5 = $('input[name=\"method\"]:checked').val();\r\n");
      out.write("\r\n");
      out.write("                    var st6 = $('input[name=\"priority\"]:checked').val();\r\n");
      out.write("                    var st7 = document.getElementById(\"expected\").value\r\n");
      out.write("                    var st8 = document.getElementById(\"scenario\").value\r\n");
      out.write("                    var st9\r\n");
      out.write("\r\n");
      out.write("                    if ($('#cacheflag').is(':checked')) {\r\n");
      out.write("                        st9 = 1;\r\n");
      out.write("                    }\r\n");
      out.write("                    else {\r\n");
      out.write("                        st9 = 0\r\n");
      out.write("                    }\r\n");
      out.write("\r\n");
      out.write("                    if (st5 != \"post_body\") {\r\n");
      out.write("                        if (parmblockid) {\r\n");
      out.write("                            for (var k = 1; k <= parmblockid; k++) {\r\n");
      out.write("                                var testd = $('input[name=\"parm_per' + k + '\"]:checked').val();\r\n");
      out.write("\r\n");
      out.write("                                if (testd == 0) {\r\n");
      out.write("                                    tempbody[k - 1] = \"\";\r\n");
      out.write("                                }\r\n");
      out.write("                                else if (testd == 1) {\r\n");
      out.write("                                    var random = Math.floor(Math.random() * 2);\r\n");
      out.write("\r\n");
      out.write("                                    if (random == 0) {\r\n");
      out.write("                                        tempbody[k - 1] = \"\";\r\n");
      out.write("                                    }\r\n");
      out.write("                                    else if (random == 1) {\r\n");
      out.write("                                        tempbody[k - 1] = document.getElementById(\"name\" + k).value + \"=\" + bodyinfo + encodeURIComponent(document.getElementById(\"value\" + k).value) + \"&\";\r\n");
      out.write("                                        section2parm[document.getElementById(\"name\" + k).value] = bodyinfo + document.getElementById(\"value\" + k).value;\r\n");
      out.write("                                        section2parm[document.getElementById(\"name\" + k).value] = stringToHex(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                        section2parm[document.getElementById(\"name\" + k).value] = encodeURIComponent(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                    }\r\n");
      out.write("                                }\r\n");
      out.write("                                else if (testd == 2) {\r\n");
      out.write("                                    tempbody[k - 1] = document.getElementById(\"name\" + k).value + \"=\" + bodyinfo + encodeURIComponent(document.getElementById(\"value\" + k).value) + \"&\";\r\n");
      out.write("                                    section2parm[document.getElementById(\"name\" + k).value] = bodyinfo + document.getElementById(\"value\" + k).value;\r\n");
      out.write("                                    section2parm[document.getElementById(\"name\" + k).value] = stringToHex(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                    section2parm[document.getElementById(\"name\" + k).value] = encodeURIComponent(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                }\r\n");
      out.write("                            }\r\n");
      out.write("                        }\r\n");
      out.write("\r\n");
      out.write("                        for (var l = 0; l < tempbody.length; l++) {\r\n");
      out.write("                            bodyinfo = bodyinfo + tempbody[l]\r\n");
      out.write("                        }\r\n");
      out.write("\r\n");
      out.write("                        bodyinfo = bodyinfo.substring(0, bodyinfo.length - 1);\r\n");
      out.write("                        bodyinfos2 = JSON.stringify(section2parm);\r\n");
      out.write("                    }\r\n");
      out.write("                    else if (st5 == \"post_body\") {\r\n");
      out.write("                        if (parmblockid) {\r\n");
      out.write("                            for (var k = 1; k <= parmblockid; k++) {\r\n");
      out.write("                                var testd = $('input[name=\"parm_per' + k + '\"]:checked').val();\r\n");
      out.write("\r\n");
      out.write("                                if (testd == 0) {\r\n");
      out.write("                                    bodyobject[document.getElementById(\"name\" + k).value] = datatoJson(\"\");\r\n");
      out.write("                                }\r\n");
      out.write("                                else if (testd == 1) {\r\n");
      out.write("                                    var random = Math.floor(Math.random() * 2);\r\n");
      out.write("\r\n");
      out.write("                                    if (random == 0) {\r\n");
      out.write("                                        bodyobject[document.getElementById(\"name\" + k).value] = datatoJson(\"\");\r\n");
      out.write("                                    }\r\n");
      out.write("                                    else if (random == 1) {\r\n");
      out.write("                                        bodyobject[document.getElementById(\"name\" + k).value] = datatoJson(document.getElementById(\"value\" + k).value);\r\n");
      out.write("                                        section2parm[document.getElementById(\"name\" + k).value] = bodyinfo + document.getElementById(\"value\" + k).value;\r\n");
      out.write("                                        section2parm[document.getElementById(\"name\" + k).value] = stringToHex(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                        section2parm[document.getElementById(\"name\" + k).value] = encodeURIComponent(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                    }\r\n");
      out.write("                                }\r\n");
      out.write("                                else if (testd == 2) {\r\n");
      out.write("                                    bodyobject[document.getElementById(\"name\" + k).value] = datatoJson(document.getElementById(\"value\" + k).value);\r\n");
      out.write("                                    section2parm[document.getElementById(\"name\" + k).value] = bodyinfo + document.getElementById(\"value\" + k).value;\r\n");
      out.write("                                    section2parm[document.getElementById(\"name\" + k).value] = stringToHex(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                    section2parm[document.getElementById(\"name\" + k).value] = encodeURIComponent(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                }\r\n");
      out.write("                            }\r\n");
      out.write("                        }\r\n");
      out.write("                        bodyinfo = JSON.stringify(bodyobject);\r\n");
      out.write("                        bodyinfos2 = JSON.stringify(section2parm);\r\n");
      out.write("                    }\r\n");
      out.write("\r\n");
      out.write("                    $.post(\"../UpdateCaseApi\",\r\n");
      out.write("                        {\r\n");
      out.write("                            model_name: st1,\r\n");
      out.write("                            interface_name: st2,\r\n");
      out.write("                            interface_suff: st3,\r\n");
      out.write("                            host_ip: st4,\r\n");
      out.write("                            method: st5,\r\n");
      out.write("                            priority: st6,\r\n");
      out.write("                            expected_result: st7,\r\n");
      out.write("                            scenario: st8,\r\n");
      out.write("                            body: encodeURIComponent(bodyinfo),\r\n");
      out.write("                            is_cache: st9,\r\n");
      out.write("                            section2body: bodyinfos2,\r\n");
      out.write("                            updataid: casedealid\r\n");
      out.write("                        },\r\n");
      out.write("                        function (data) {\r\n");
      out.write("                            if (data == 'success' && flag) {\r\n");
      out.write("                                alert(\"修改用例成功\");\r\n");
      out.write("                            } else if (flag) {\r\n");
      out.write("                                alert(data);\r\n");
      out.write("                            }\r\n");
      out.write("                        }\r\n");
      out.write("                    )\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("                function testsumbit() {\r\n");
      out.write("                    var bodyinfo = \"\";\r\n");
      out.write("                    var bodyinfo2 = \"\";\r\n");
      out.write("                    var bodyobject = new Object;\r\n");
      out.write("                    var tempbody = new Array();\r\n");
      out.write("                    var section2parm = {};\r\n");
      out.write("                    var section2parm_uncode = {};\r\n");
      out.write("\r\n");
      out.write("                    var st1 = document.getElementById(\"model_name\").value;\r\n");
      out.write("                    var st2 = document.getElementById(\"interface_name\").value;\r\n");
      out.write("                    var st3 = document.getElementById(\"interface_suff\").value;\r\n");
      out.write("                    var st4 = document.getElementById(\"ip_auto\").value;\r\n");
      out.write("\r\n");
      out.write("                    var st5 = $('input[name=\"method\"]:checked').val();\r\n");
      out.write("\r\n");
      out.write("                    var st6 = $('input[name=\"priority\"]:checked').val();\r\n");
      out.write("                    var st7 = document.getElementById(\"expected\").value\r\n");
      out.write("                    var st8 = document.getElementById(\"scenario\").value\r\n");
      out.write("                    var st9\r\n");
      out.write("\r\n");
      out.write("                    if ($('#cacheflag').is(':checked')) {\r\n");
      out.write("                        st9 = 1;\r\n");
      out.write("                    }\r\n");
      out.write("                    else {\r\n");
      out.write("                        st9 = 0\r\n");
      out.write("                    }\r\n");
      out.write("\r\n");
      out.write("                    if (st5 != \"post_body\") {\r\n");
      out.write("                        if (parmblockid) {\r\n");
      out.write("                            for (var k = 1; k <= parmblockid; k++) {\r\n");
      out.write("                                var testd = $('input[name=\"parm_per' + k + '\"]:checked').val();\r\n");
      out.write("\r\n");
      out.write("                                if (testd == 0) {\r\n");
      out.write("                                    tempbody[k - 1] = \"\";\r\n");
      out.write("                                }\r\n");
      out.write("                                else if (testd == 1) {\r\n");
      out.write("                                    var random = Math.floor(Math.random() * 2);\r\n");
      out.write("\r\n");
      out.write("                                    if (random == 0) {\r\n");
      out.write("                                        tempbody[k - 1] = \"\";\r\n");
      out.write("                                    }\r\n");
      out.write("                                    else if (random == 1) {\r\n");
      out.write("                                        tempbody[k - 1] = document.getElementById(\"name\" + k).value + \"=\" + bodyinfo + encodeURIComponent(document.getElementById(\"value\" + k).value) + \"&\";\r\n");
      out.write("                                        section2parm[document.getElementById(\"name\" + k).value] = bodyinfo + document.getElementById(\"value\" + k).value;\r\n");
      out.write("                                        section2parm[document.getElementById(\"name\" + k).value] = stringToHex(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                        section2parm[document.getElementById(\"name\" + k).value] = encodeURIComponent(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                    }\r\n");
      out.write("                                }\r\n");
      out.write("                                else if (testd == 2) {\r\n");
      out.write("                                    tempbody[k - 1] = document.getElementById(\"name\" + k).value + \"=\" + bodyinfo + encodeURIComponent(document.getElementById(\"value\" + k).value) + \"&\";\r\n");
      out.write("                                    section2parm[document.getElementById(\"name\" + k).value] = bodyinfo + document.getElementById(\"value\" + k).value;\r\n");
      out.write("                                    section2parm[document.getElementById(\"name\" + k).value] = stringToHex(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                    section2parm[document.getElementById(\"name\" + k).value] = encodeURIComponent(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                }\r\n");
      out.write("                            }\r\n");
      out.write("                        }\r\n");
      out.write("\r\n");
      out.write("                        for (var l = 0; l < tempbody.length; l++) {\r\n");
      out.write("                            bodyinfo = bodyinfo + tempbody[l]\r\n");
      out.write("                        }\r\n");
      out.write("\r\n");
      out.write("                        bodyinfo = bodyinfo.substring(0, bodyinfo.length - 1);\r\n");
      out.write("                        bodyinfos2 = JSON.stringify(section2parm);\r\n");
      out.write("                    }\r\n");
      out.write("                    else if (st5 == \"post_body\") {\r\n");
      out.write("                        if (parmblockid) {\r\n");
      out.write("                            for (var k = 1; k <= parmblockid; k++) {\r\n");
      out.write("                                var testd = $('input[name=\"parm_per' + k + '\"]:checked').val();\r\n");
      out.write("\r\n");
      out.write("                                if (testd == 0) {\r\n");
      out.write("                                    bodyobject[document.getElementById(\"name\" + k).value] = datatoJson(\"\");\r\n");
      out.write("                                }\r\n");
      out.write("                                else if (testd == 1) {\r\n");
      out.write("                                    var random = Math.floor(Math.random() * 2);\r\n");
      out.write("\r\n");
      out.write("                                    if (random == 0) {\r\n");
      out.write("                                        bodyobject[document.getElementById(\"name\" + k).value] = datatoJson(\"\");\r\n");
      out.write("                                    }\r\n");
      out.write("                                    else if (random == 1) {\r\n");
      out.write("                                        bodyobject[document.getElementById(\"name\" + k).value] = datatoJson(document.getElementById(\"value\" + k).value);\r\n");
      out.write("                                        section2parm[document.getElementById(\"name\" + k).value] = bodyinfo + document.getElementById(\"value\" + k).value;\r\n");
      out.write("                                        section2parm[document.getElementById(\"name\" + k).value] = stringToHex(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                        section2parm[document.getElementById(\"name\" + k).value] = encodeURIComponent(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                    }\r\n");
      out.write("                                }\r\n");
      out.write("                                else if (testd == 2) {\r\n");
      out.write("                                    bodyobject[document.getElementById(\"name\" + k).value] = datatoJson(document.getElementById(\"value\" + k).value);\r\n");
      out.write("                                    section2parm[document.getElementById(\"name\" + k).value] = bodyinfo + document.getElementById(\"value\" + k).value;\r\n");
      out.write("                                    section2parm[document.getElementById(\"name\" + k).value] = stringToHex(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                    section2parm[document.getElementById(\"name\" + k).value] = encodeURIComponent(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                }\r\n");
      out.write("                            }\r\n");
      out.write("                        }\r\n");
      out.write("                        bodyinfo = JSON.stringify(bodyobject);\r\n");
      out.write("                        bodyinfos2 = JSON.stringify(section2parm);\r\n");
      out.write("                    }\r\n");
      out.write("\r\n");
      out.write("                    $.post(\"../Controller/AddCaseApi.jsp\",\r\n");
      out.write("                        {\r\n");
      out.write("                            model_name: st1,\r\n");
      out.write("                            interface_name: st2,\r\n");
      out.write("                            interface_suff: st3,\r\n");
      out.write("                            host_ip: st4,\r\n");
      out.write("                            method: st5,\r\n");
      out.write("                            priority: st6,\r\n");
      out.write("                            expected_result: st7,\r\n");
      out.write("                            scenario: st8,\r\n");
      out.write("                            body: encodeURIComponent(bodyinfo),\r\n");
      out.write("                            is_cache: st9,\r\n");
      out.write("                            section2body: bodyinfos2\r\n");
      out.write("                        },\r\n");
      out.write("                        function (data) {\r\n");
      out.write("                            alert(\"添加用例成功\");\r\n");
      out.write("                        }\r\n");
      out.write("                    )\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("                function getTimeGenId() {\r\n");
      out.write("                    var r_id = (new Date()).valueOf();\r\n");
      out.write("                    r_id = r_id.toString();\r\n");
      out.write("                    r_id = r_id.substr(r_id.length - 8);\r\n");
      out.write("                    return r_id;\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("                // flag：1 保存修改后自行，0，直接执行，100，一键边界测试\r\n");
      out.write("                function doitnow(flag) {\r\n");
      out.write("                    //自动提交修改结果后再执行\r\n");
      out.write("                    if (flag == 1) {\r\n");
      out.write("                        testupdata(false);\r\n");
      out.write("                    }\r\n");
      out.write("//                    var bodyinfo = \"\";\r\n");
      out.write("                    var bodyobject = new Object;\r\n");
      out.write("//                    var tempbody = new Array();\r\n");
      out.write("                    var section2parm = {};\r\n");
      out.write("\r\n");
      out.write("                    var stn1;\r\n");
      out.write("                    if (document.getElementById(\"ip_input\").value != \"\") {\r\n");
      out.write("                        stn1 = document.getElementById(\"ip_input\").value;\r\n");
      out.write("                    } else {\r\n");
      out.write("                        stn1 = document.getElementById(\"ip_auto\").value\r\n");
      out.write("                    }\r\n");
      out.write("                    var stn2 = document.getElementById(\"interface_suff\").value\r\n");
      out.write("                    var url = stn1 + stn2\r\n");
      out.write("                    var stn5\r\n");
      out.write("\r\n");
      out.write("                    var methodflag = document.getElementsByName(\"method\");\r\n");
      out.write("\r\n");
      out.write("                    var bodyinfo = \"\";\r\n");
      out.write("                    var tempbody = new Array();\r\n");
      out.write("\r\n");
      out.write("                    for (var ri = 0; ri < methodflag.length; ri++) {\r\n");
      out.write("                        if (methodflag[ri].checked) {\r\n");
      out.write("                            stn5 = methodflag[ri].value\r\n");
      out.write("                        }\r\n");
      out.write("                    }\r\n");
      out.write("\r\n");
      out.write("                    var DoNowFlag = 0;\r\n");
      out.write("                    if (flag == 100) {\r\n");
      out.write("                        stn5 = stn5 + \"@oneKeyCheck\";\r\n");
      out.write("                    }\r\n");
      out.write("\r\n");
      out.write("                    if (stn5 != \"post_body\") {\r\n");
      out.write("                        if (parmblockid) {\r\n");
      out.write("                            for (var k = 1; k <= parmblockid; k++) {\r\n");
      out.write("                                var testd = $('input[name=\"parm_per' + k + '\"]:checked').val();\r\n");
      out.write("\r\n");
      out.write("                                if (testd == 0) {\r\n");
      out.write("                                    tempbody[k - 1] = \"\";\r\n");
      out.write("                                }\r\n");
      out.write("                                else if (testd == 1) {\r\n");
      out.write("                                    var random = Math.floor(Math.random() * 2);\r\n");
      out.write("\r\n");
      out.write("                                    if (random == 0) {\r\n");
      out.write("                                        tempbody[k - 1] = \"\";\r\n");
      out.write("                                    }\r\n");
      out.write("                                    else if (random == 1) {\r\n");
      out.write("                                        tempbody[k - 1] = document.getElementById(\"name\" + k).value + \"=\" + bodyinfo + encodeURIComponent(document.getElementById(\"value\" + k).value) + \"&\";\r\n");
      out.write("                                        section2parm[document.getElementById(\"name\" + k).value] = bodyinfo + document.getElementById(\"value\" + k).value;\r\n");
      out.write("                                        section2parm[document.getElementById(\"name\" + k).value] = stringToHex(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                        section2parm[document.getElementById(\"name\" + k).value] = encodeURIComponent(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                    }\r\n");
      out.write("                                }\r\n");
      out.write("                                else if (testd == 2) {\r\n");
      out.write("                                    tempbody[k - 1] = document.getElementById(\"name\" + k).value + \"=\" + bodyinfo + encodeURIComponent(document.getElementById(\"value\" + k).value) + \"&\";\r\n");
      out.write("                                    section2parm[document.getElementById(\"name\" + k).value] = bodyinfo + document.getElementById(\"value\" + k).value;\r\n");
      out.write("                                    section2parm[document.getElementById(\"name\" + k).value] = stringToHex(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                    section2parm[document.getElementById(\"name\" + k).value] = encodeURIComponent(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                }\r\n");
      out.write("                            }\r\n");
      out.write("                        }\r\n");
      out.write("\r\n");
      out.write("                        for (var l = 0; l < tempbody.length; l++) {\r\n");
      out.write("                            bodyinfo = bodyinfo + tempbody[l]\r\n");
      out.write("                        }\r\n");
      out.write("\r\n");
      out.write("                        bodyinfo = bodyinfo.substring(0, bodyinfo.length - 1);\r\n");
      out.write("                    }\r\n");
      out.write("                    else if (stn5 == \"post_body\" || stn5 == \"post_return_json\") {\r\n");
      out.write("                        if (parmblockid) {\r\n");
      out.write("                            for (var k = 1; k <= parmblockid; k++) {\r\n");
      out.write("                                var testd = $('input[name=\"parm_per' + k + '\"]:checked').val();\r\n");
      out.write("\r\n");
      out.write("                                if (testd == 0) {\r\n");
      out.write("                                    bodyobject[document.getElementById(\"name\" + k).value] = datatoJson(\"\");\r\n");
      out.write("                                }\r\n");
      out.write("                                else if (testd == 1) {\r\n");
      out.write("                                    var random = Math.floor(Math.random() * 2);\r\n");
      out.write("\r\n");
      out.write("                                    if (random == 0) {\r\n");
      out.write("                                        bodyobject[document.getElementById(\"name\" + k).value] = datatoJson(\"\");\r\n");
      out.write("                                    }\r\n");
      out.write("                                    else if (random == 1) {\r\n");
      out.write("                                        bodyobject[document.getElementById(\"name\" + k).value] = datatoJson(document.getElementById(\"value\" + k).value);\r\n");
      out.write("                                        section2parm[document.getElementById(\"name\" + k).value] = bodyinfo + document.getElementById(\"value\" + k).value;\r\n");
      out.write("                                        section2parm[document.getElementById(\"name\" + k).value] = stringToHex(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                        section2parm[document.getElementById(\"name\" + k).value] = encodeURIComponent(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                    }\r\n");
      out.write("                                }\r\n");
      out.write("                                else if (testd == 2) {\r\n");
      out.write("                                    bodyobject[document.getElementById(\"name\" + k).value] = datatoJson(document.getElementById(\"value\" + k).value);\r\n");
      out.write("                                    section2parm[document.getElementById(\"name\" + k).value] = bodyinfo + document.getElementById(\"value\" + k).value;\r\n");
      out.write("                                    section2parm[document.getElementById(\"name\" + k).value] = stringToHex(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                    section2parm[document.getElementById(\"name\" + k).value] = encodeURIComponent(section2parm[document.getElementById(\"name\" + k).value]);\r\n");
      out.write("                                }\r\n");
      out.write("                            }\r\n");
      out.write("                        }\r\n");
      out.write("                        bodyinfo = JSON.stringify(bodyobject);\r\n");
      out.write("                    }\r\n");
      out.write("\r\n");
      out.write("                    bodyinfo = bodyinfo.replace(\"idgenerator\", getTimeGenId());\r\n");
      out.write("                    //bodyinfo = bodyinfo.replace(\"*timestamp=(\\\\d+)&*\", (Date.parse(new Date()))/1000)\r\n");
      out.write("\r\n");
      out.write("                    var xmlhttp;\r\n");
      out.write("                    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari\r\n");
      out.write("                        xmlhttp = new XMLHttpRequest();\r\n");
      out.write("                    }\r\n");
      out.write("                    else {// code for IE6, IE5\r\n");
      out.write("                        xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n");
      out.write("                    }\r\n");
      out.write("                    xmlhttp.onreadystatechange = function () {\r\n");
      out.write("                        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {\r\n");
      out.write("//\t\talert(\"测试用例运行成功\");\r\n");
      out.write("                            var save = xmlhttp.responseText;\r\n");
      out.write("                            sendresult(save);\r\n");
      out.write("                        }\r\n");
      out.write("                    }\r\n");
      out.write("                    xmlhttp.open(\"POST\", \"../Tool/RunCaseNow.jsp\", true);\r\n");
      out.write("                    xmlhttp.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\r\n");
      out.write("                    xmlhttp.send(\"url=\" + url + \"&bodyinfo=\" + encodeURIComponent(bodyinfo) + \"&method=\" + stn5);\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("                function sendresult(result) {\r\n");
      out.write("                    document.getElementById(\"result_try\").value = result;\r\n");
      out.write("                    document.getElementById(\"try\").submit();\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("                function change_confirm() {\r\n");
      out.write("                    if (!confirm(\"确认修改用例信息？\")) {\r\n");
      out.write("                        return false\r\n");
      out.write("                    }\r\n");
      out.write("                    else {\r\n");
      out.write("                        return true\r\n");
      out.write("                    }\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("                function exit_confirm() {\r\n");
      out.write("                    if (!confirm(\"确认退出？您未保存的修改信息会丢失\")) {\r\n");
      out.write("                        return false\r\n");
      out.write("                    }\r\n");
      out.write("                    else {\r\n");
      out.write("                        window.location.href = 'UpdataStep1.jsp'\r\n");
      out.write("                    }\r\n");
      out.write("                }\r\n");
      out.write("            </script>\r\n");
      out.write("        </div>\r\n");
      out.write("    </div>\r\n");
      out.write("</div>\r\n");
      out.write("</div>\r\n");
      out.write("<form id=\"try\" action=\"../Tool/Result.jsp\" method=\"post\" target=\"_blank\">\r\n");
      out.write("    <input id=\"result_try\" name=\"result\" type=\"hidden\"/>\r\n");
      out.write("</form>\r\n");
      out.write("</body>\r\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
